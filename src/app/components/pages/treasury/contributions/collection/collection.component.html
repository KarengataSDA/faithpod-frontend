<app-page-header
  [title]="'Date Collections'"
  [items]="['Collections']"
  [active_item]="'All Collections'"
></app-page-header>


<div class="card-footer text-end" *ngIf="authService.hasPermission('can_create_contribution')">
  <a class="btn ms-2 btn-primary my-1"
    routerLink="/pages/treasury/collections/create">
    <i class="fe fe-plus"></i> Add Collection
  </a>
</div>

<div class="row row-sm">
  <div class="col-xl-12">
    <div class="card overflow-visible">
      <div class="card-header pb-0">
        <div>
          <h6 class="main-content-label mb-1">Collection Categorized by Dates</h6>
          <p class="text-muted card-sub-title"></p>
        </div>
      </div>
      <div class="card-body">
        <div class="">
          <form action="" class="ngb-table">
            <div class="form-group form-inline">
              Search
              <input class="form-control ms-2" type="text" name="searchTerm" />
            </div>
            <div class="table-responsive">
              <table
                id="data-table"
                class="table table-striped border"
              >
                <thead class="border-top">
                  <tr>
                    <th>NO.</th>
                    <th>Contribution Date</th>
                    <th>Total</th>
                    <th *ngIf="authService.hasPermission('can_view_contributions')">Action</th>
                  </tr>
                </thead>
                 <tbody *ngIf="isLoading">
                  <tr *ngFor="let item of [1,2,3,4]">
                    <td><div class="skeleton skeleton-text"></div></td>
                    <td><div class="skeleton skeleton-text"></div></td>
                    <td><div class="skeleton skeleton-btn"></div></td>
                    <td><div class="skeleton skeleton-btn"></div></td>
                  </tr>
                </tbody>

                <tbody *ngIf="!isLoading">
                  <tr
                    class="border-bottom"
                    *ngFor="let collection of collections; index as i"
                  >
                    <td>
                      <div class="d-flex">
                        <div class="mt-0 mt-sm-3 d-block">
                          <h6 class="mb-0 fs-14 fw-semibold">{{ i + 1 }}</h6>
                        </div>
                      </div>
                    </td>

                    <td>
                      <span class="mt-sm-2 d-block">{{ collection.contribution_date | date:'mediumDate'
                      }}</span>
                    </td>
                    <td>
                      <span class="mt-sm-2 d-block">{{ collection.total_amount | number:'1.2-2'
                      }}</span>
                    </td>

                    <!-- <td>
                                    <div class="mt-sm-1 text-center" >
                                        <a  class="btn text-primary btn-sm">
                                           <ng-template [ngIf] ="collection.status == 0">
                                            <span (click)="sendMail(collection.id)" class="fs-14"><i class="ri-mail-open-line text-danger fs-14"></i></span>
                                           </ng-template>
                                    </a>
                                    <ng-template [ngIf] ="collection.status == 1">
                                      <span class="fs-14" style="padding: 10px; margin-right: 30px;"><i class="ri-mail-send-line text-primary fs-14"></i></span>
                                    </ng-template>
                                    </div>
                                </td> -->
                    <td>
                      <div class="mt-2">
                        <a 
                          routerLink="view/{{collection.contribution_date}}"
                          class="btn text-primary btn-sm"
                          data-bs-toggle="tooltip"
                          ngbTooltip="View"
                          ><span class="fe fe-eye fs-14"></span
                        ></a>
                        <!-- <a 
                                        (click)="deleteContribution(collection.id)"
                                        class="btn text-danger btn-sm"
                                            data-bs-toggle="tooltip"
                                            ngbTooltip="Delete"><span
                                                class="fe fe-trash-2 fs-14"></span></a> -->
                      </div>
                    </td>
                  </tr>
                </tbody>
              </table>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>
</div>
